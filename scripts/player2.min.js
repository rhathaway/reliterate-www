var prx=window.prx||{};prx.project={};prx.data={};prx.pages=[];prx.symbols=[];prx.templates=[];prx.maxPageId=0;prx.maxSymbolId=0;prx.iSelectedPage=0;prx.iSelectedPageId="";prx.iSelectedTemplate=-1;prx.types={};prx.devices={};prx.components={};prx.url={};prx.scroller={};prx.eventTransitionPage="";prx.editor=false;prx.shiftKeyDown=false;prx.statusbars={};prx.navigationbars={};prx.scrollableTabbars=[];var _scrollers=[];var _previousPageId="";var _gobackstack=[];prx.fonts=[];prx.actions={};prx.actionIsRunning={};prx.actionLoopCounter={};prx.pagehash=true;prx.scrollPosition={};prx.easingTransitToTweenMax={linear:"Linear.easeNone","Linear.easeNone":"Linear.easeNone",ease:"Linear.ease","Linear.ease":"Linear.ease","in":"Linear.easeIn","Linear.easeIn":"Linear.easeIn",out:"Linear.easeOut","Linear.easeOut":"Linear.easeOut","in-out":"Linear.easeInOut","Linear.easeInOut":"Linear.easeInOut",swing:"Bounce.easeInOut","Bounce.easeInOut":"Bounce.easeInOut",snap:"Strong.easeOutStrong","Strong.easeOutStrong":"Strong.easeOutStrong"};prx.defaultAnimEngine="Tweenmax";function setFFPointerEvents(value){var nodes=$("input, textarea");for(var i=0;i<nodes.length;i++){nodes[i].style.pointerEvents=value;}_nodes=null;}var log=function(s){try{console.log(s);}catch(err){}return false;};var lag=function(s){try{console.log(s);}catch(err){}return false;};var mlog=function(s){$(document.body).find("[data-role='page']").remove();$("#log").html(s);$("#log").show();return false;};prx.getOrientation=function(){var elem=document.documentElement;return elem&&elem.clientWidth/elem.clientHeight<1.1?"portrait":"landscape";};prx.loadProject=function(filename){var _filename=filename;var _xt=new Date().getTime();if(typeof(prx.xdata)=="undefined"){$.post("/editor/data/loadpublished/?x="+_xt,{filename:_filename,vup:prx.vup,v:prx.v,rl:prx.rl,s3b:prx.s3b,ron:prx.ron},function(output){prx.parseLoadedData(output);prx.loadProjectCont();});}else{prx.parseLoadedData(prx.xdata);prx.loadProjectCont();}};prx.loadProjectCont=function(){$(window.document).trigger("mobileinit");$("body").css("background","white");var _activePage=$.mobile.activePage.get(0).id;var _page=prx.getPageStructFromId(_activePage);if(_orientation!=_page.orientation){var _$loader=$("#loader-wrapper").show();prx.changeOrientation();_$loader.find("span").text("0%");var _noOfImgs=$('[data-role=page] img:not([src=""])').length;var _loadedImgs=0;if(_noOfImgs==0){_$loader.hide();}$('[data-role=page] img:not([src=""])').unbind("load error").bind("load error",function(){_loadedImgs++;_$loader.find("span").text(Math.round(_loadedImgs*100/_noOfImgs)+"%");if(_loadedImgs==_noOfImgs){_$loader.hide();}});}else{$.mobile.changePage($("#"+_activePage),{allowSamePageTransition:true,transition:"none",changeHash:prx.pagehash});}$(window).bind("pagechange",function(event,obj){if(obj.options.fromHashChange){prx.eventTransitionPage="#"+obj.toPage[0].id;if(typeof(prx.scroller)!="undefined"){var _pgId=obj.toPage[0].id;$.each(prx.scroller,function(i,elm){if(i.substr(0,_pgId.length)==_pgId){if(typeof(prx.scrollPosition[i])!="undefined"){elm.scrollTo(prx.scrollPosition[i][0],prx.scrollPosition[i][1],0);}}});}}});$(window).orientationchange(function(event){if(parent==window){prx.changeOrientation();}return true;});$(":input").live("focusout",function(){window.scrollTo(0,0);});$(":input").click(function(e){e.stopPropagation();});$("input[type=text], input[type=password], textarea").click(function(){$(this).focus();});if(prx.initialpageid!=false){if("p-"+prx.iinitialpageid!=$.mobile.activePage.get(0).id){$.mobile.changePage($("#p-"+prx.initialpageid),{allowSamePageTransition:true,transition:"none",changeHash:prx.pagehash});}$("#"+$.mobile.activePage.get(0).id).trigger("orientationchange");}else{if("p-"+prx.iSelectedPageId!=$.mobile.activePage.get(0).id){$.mobile.changePage($("#p-"+prx.iSelectedPageId),{allowSamePageTransition:true,transition:"none",changeHash:prx.pagehash});}}for(var i=0;i<prx.scrollableTabbars.length;i++){var _tabbar=prx.scrollableTabbars[i].container+"-"+prx.scrollableTabbars[i].id+"-inner";var _linked=prx.scrollableTabbars[i].container+"-"+prx.scrollableTabbars[i].linked+"-inner";var _bLinked=false;prx.scroller[_tabbar]=new iScroll(_tabbar,{vScroll:false,hScrollbar:false,vScrollbar:false,useTransition:true,momentum:false,snap:"li",linkedContainer:_linked,onScrollMove:function(a,b){if(typeof(prx.scroller[this.options.linkedContainer])!="undefined"){prx.scroller[this.options.linkedContainer].scrollTo(this.x*2,0,0,false);}},onTouchEnd:function(a){if(typeof(prx.scroller[this.options.linkedContainer])!="undefined"){prx.scroller[this.options.linkedContainer].scrollToPage(this.currPageX,0,200);}}});prx.scroller[_tabbar].scrollToPage(Number(prx.scrollableTabbars[i].start),0,0);}};prx.parseLoadedData=function(data){var _project=$.evalJSON(data);prx.project=_project.project;prx.data=_project.data;prx.pages=_project.pages;prx.symbols=_project.symbols;prx.templates=_project.templates;prx.maxPageId=parseInt(_project.maxpageid);prx.maxSymbolId=parseInt(_project.maxsymbolid);prx.maxTemplateId=parseInt(_project.maxtemplateid);prx.iSelectedTemplate=parseInt(_project.iSelectedTemplate);if(typeof(_project.fonts)!="undefined"){prx.fonts=_project.fonts;}prx.loadProjectFonts();for(var n=0;n<prx.pages.length;n++){if(typeof(prx.pages[n].id)=="undefined"){prx.pages.splice(n,1);}else{prx.pages[n].id=parseInt(prx.pages[n].id);}}for(var n=0;n<prx.symbols.length;n++){if(typeof(prx.symbols[n].id)=="undefined"){prx.symbols.splice(n,1);}else{prx.symbols[n].id=parseInt(prx.symbols[n].id);}}for(var n=0;n<prx.templates.length;n++){if(typeof(prx.templates[n].id)=="undefined"){prx.templates.splice(n,1);}else{prx.templates[n].id=parseInt(prx.templates[n].id);}}var _temporientation=prx.getOrientation();if(_temporientation=="portrait"){prx.iSelectedPageId=prx.project.startscreen;if(prx.getPageIndexFromId(prx.project.startscreen)>-1){prx.iSelectedPage=prx.getPageIndexFromId(prx.project.startscreen);}else{prx.iSelectedPage=0;prx.iSelectedPageId=parseInt(prx.pages[0].id);}}else{if(typeof(prx.project.startscreenlandscape)=="undefined"){prx.project.startscreenlandscape=1;}prx.iSelectedPageId=prx.project.startscreenlandscape;if(prx.getPageIndexFromId(prx.project.startscreenlandscape)>-1){prx.iSelectedPage=prx.getPageIndexFromId(prx.project.startscreenlandscape);}else{prx.iSelectedPage=0;prx.iSelectedPageId=parseInt(prx.pages[0].id);}}_project=null;prx.refreshPanel();if(!prx.embed&&parent!=window){try{parent.prx.iniPlayerReady({pages:prx.pages,startscreen:(prx.deviceorientation=="portrait")?prx.project.startscreen:prx.project.startscreenlandscape});}catch(err){}}};prx.showGoFullScreenMessage=function(){if(("standalone" in window.navigator)&&!window.navigator.standalone){$(document.body).find("[data-role='page']").remove();$("#appModeNote").show();}};prx.getPageIndexFromElementId=function(id){if(id.substring(0,1)=="#"){return id.substring(3);}else{return id.substring(2);}};prx.getPageIndexFromId=function(id){var rIndex=-1;for(var n=0;n<prx.pages.length;n++){if(prx.pages[n].id==id){rIndex=n;}}return rIndex;};prx.getTemplateIndexFromId=function(id){var rIndex=-1;for(var n=0;n<prx.templates.length;n++){if(prx.templates[n].id==id){rIndex=n;}}return rIndex;};prx.getSymbolIndexFromId=function(id){var rIndex=-1;for(var n=0;n<prx.symbols.length;n++){if(prx.symbols[n].id==id){rIndex=n;}}return rIndex;};prx.getPageStructFromId=function(pageid){var _id=prx.getPageIndexFromElementId(pageid);return prx.pages[prx.getPageIndexFromId(_id)];};prx.refreshPanel=function(){var _$loader=$("#loader-wrapper").show();prx.preLoadPages();_$loader.find("span").text("0%");var _noOfImgs=$('[data-role=page] img:not([src=""])').length;var _loadedImgs=0;if(_noOfImgs==0){_$loader.hide();}$('[data-role=page] img:not([src=""])').bind("load error",function(){_loadedImgs++;_$loader.find("span").text(Math.round(_loadedImgs*100/_noOfImgs)+"%");if(_loadedImgs==_noOfImgs){_$loader.hide();}});setTimeout(function(){_$loader.hide();$('[data-role=page] img:not([src=""])').unbind("load error");},10000);};prx.preLoadPages=function(){$.each(prx.pages,function(i,page){prx.preLoadPage(page);});};prx.loadPageEvents=function(pageid){var _pageid="";$.each(prx.pages,function(i,page){if(page.id==pageid){_pageid=page.id;$("#p-"+pageid).unbind("pagebeforeshow").bind("pagebeforeshow",function(event,ui){_previousPageId=ui.prevPage.get(0).id;if(prx.allowstatusbar&&prx.statusbars[page.id].statusbar=="1"){try{if(prx.export2html!="1"){$("#statusbar").css({"background-image":prx.buildStatusBarAsset(prx.statusbars[page.id].orientation)});}else{if(prx.statusbarapplies=="1"){$("#statusbar").css("background-image","url(./images/statusbar_"+prx.statusbars[page.id].orientation+".png)");}else{$("#statusbar").css("background-image","none");}}$("#statusbar").css("height",prx.devices[prx.device]["statusbarheight"+prx.statusbars[page.id].orientation]+"px");}catch(err){}$("#p-"+page.id).css("top",prx.devices[prx.device]["statusbarheight"+prx.statusbars[page.id].orientation]+"px");}else{if(page.background=="none"){$("#statusbar").css("height","0px");}$("#p-"+page.id).css("top","0px");}if(prx.allownavigationbar&&prx.navigationbars[page.id].navigationbar=="1"){try{if(prx.export2html!="1"){$("#navigationbar").css({"background-image":prx.buildNavigationBarAsset(prx.navigationbars[page.id].orientation)});}else{if(prx.navigationbarapplies=="1"){$("#navigationbar").css("background-image","url(./images/navigationbar_"+prx.statusbars[page.id].orientation+".png)");}else{$("#statusbar").css("background-image","none");}}$("#navigationbar").css("height",prx.devices[prx.device]["navigationbarheight"+prx.navigationbars[page.id].orientation]+"px");$("#navigationbar").css("top",prx.devices[prx.device][prx.navigationbars[page.id].orientation][1]-prx.devices[prx.device]["navigationbarheight"+_orientation]+"px");}catch(err){}}else{$("#navigationbar").css("height","0px");}});$("#p-"+pageid).bind("pagebeforehide",function(event,ui){prx.renderOverlay("#p-"+pageid);});$("#p-"+pageid).bind("pagehide",function(event,ui){$(this).find(".type-list input, .type-list-retina input, .type-android-listbasic input").not(".listitem-type-checkbox input").removeAttr("checked");});prx.parsePageAction(i);prx.loadItemEvents(page,"page",pageid,"");}});};prx.renderOverlay=function(pageid){var _pageid=pageid;var _statusbar=prx.statusbars[pageid.substr(3)];var _top=0;var _height=prx.devices[prx.device][_statusbar.orientation][1];if(prx.allowstatusbar&&_statusbar.statusbar=="1"){_top=prx.devices[prx.device]["statusbarheight"+_statusbar.orientation];_height-=_top;}var $overlay=$("#overlay");$(_pageid).find('[data-mpoverlay="1"]').each(function(){var _elmTop=$(this).offset().top-_top;$(this).clone().css("top",_elmTop).find("input").attr("id",function(){return $(this).attr("id")+"-overlay";}).attr("name",function(){return $(this).attr("name")+"-overlay";}).end().find("label").attr("for",function(){return $(this).attr("for")+"-overlay";}).end().appendTo($overlay);});$overlay.css("top",_top+"px").height(_height);$("#overlay").show();};prx.loadTemplateEvents=function(templateid,pageid,containerid){var _templateid="";$.each(prx.templates,function(i,template){if(template.id==templateid){_templateid=template.id;prx.loadItemEvents(template,"template",pageid,_templateid,containerid);}});};prx.loadSymbolEvents=function(symbolid,pageid,templateid,containerid){var _symbolid="";$.each(prx.symbols,function(i,symbol){if(symbol.id==symbolid){prx.loadItemEvents(symbol,"symbol",pageid,templateid,containerid);}});return false;};prx.loadItemEvents=function(data,type,pageid,templateid,containerid){var _data="";var _prefix="";if(type=="page"){_data=$.evalJSON(data.data);_prefix="p-"+pageid;}if(type=="template"){_data=$.evalJSON(data.data);_prefix="p-"+pageid;if(typeof(containerid)!="undefined"&&containerid!=""){_prefix+="-"+containerid;}}if(type=="symbol"){_data=$.evalJSON(data.data);_prefix="p-"+pageid+"-"+containerid+"-";_data.items=_data;}$.each(_data.items,function(i,item){prx.parseItemAction(item,_prefix,pageid,templateid);});};prx.parseItemAction=function(item,containerid,pageid,templateid,taptoclick){var _target="";if(typeof(taptoclick)=="undefined"){taptoclick=false;}if(typeof(containerid)!="undefined"){if(typeof(templateid)!="undefined"&&templateid!=""){containerid=containerid+"-t"+templateid;}_id=containerid+"-"+item.id;_target=containerid+"-";}else{_id=item.id;_target="";}if(typeof(item.actions)!="undefined"){item.actions.sort(function(a,b){return(a.sort-b.sort);});}switch(item.type){case"listbasic":case"listnested":case"listwithicon":case"listwithvalue":case"listnestedwithvalue":case"listwithiconandvalue":case"listwithbadge":case"listnestedwithbadge":case"listwithiconandbadge":case"listcomplex":case"listbasic_retina":case"listnested_retina":case"listwithicon_retina":case"listwithvalue_retina":case"listnestedwithvalue_retina":case"listwithiconandvalue_retina":case"listwithbadge_retina":case"listnestedwithbadge_retina":case"listwithiconandbadge_retina":case"listcomplex_retina":case"android_listbasic":if(typeof(item.listitems)=="undefined"){item.listitems=[];}$.each(item.listitems,function(i,listitem){if(typeof(listitem.actions)=="undefined"){listitem.actions=[];}if(listitem.actions.length!=0){$("#"+_id+"-listitems-"+i).append("<div class='action-highlight'></div>");}$.each(listitem.actions,function(j,action){if(action.type=="tap"){action.type="click";}action.bindTo="#"+_id+"-listitems-"+i;action.targetId="#"+_target+action.itemId;action.containerid=containerid;if(typeof(action.delay)=="undefined"||action.delay==0){action.delay=10;}prx.buildAction(action,taptoclick);$("#"+_id+"-listitems-"+i+" .action-highlight").append('<span class="actionicon action-'+action.type+'" title="'+action.type+": "+action.title+'"></span>');});});break;case"buttongroup":case"pagecontroller":case"buttongroup_retina":case"pagecontroller_retina":case"actionsheet":case"actionsheet_retina":case"alert":case"alert_retina":case"metro_appbar":case"metro_appbar_mini":case"metro_charms":case"metro_filters":case"metro_contextmenu":case"metro_dropdown":case"metro_dropdown_withselection":case"metro_select":case"metro_dialog":case"metro_warningbar":if(typeof(item.buttons)=="undefined"){item.buttons=[];}$.each(item.buttons,function(i,button){if(typeof(button.actions)=="undefined"){button.actions=[];}if(button.actions.length!=0){$("#"+_id+"-buttons-"+i).append("<div class='action-highlight'></div>");}$.each(button.actions,function(j,action){action.bindTo="#"+_id+"-buttons-"+i;action.targetId="#"+_target+action.itemId;action.containerid=containerid;prx.buildAction(action,taptoclick);$("#"+_id+"-buttons-"+i+" .action-highlight").append('<span class="actionicon action-'+action.type+'" title="'+action.type+": "+action.title+'"></span>');});});break;case"segmentedcontrol":case"segmentedcontrol_retina":case"android_dropdown":if(typeof(item.options)=="undefined"){item.options=[];}$.each(item.options,function(i,option){if(typeof(option.actions)=="undefined"){option.actions=[];}if(option.actions.length!=0){$("#"+_id+"-options-"+i+" label").append("<div class='action-highlight'></div>");}$.each(option.actions,function(j,action){action.bindTo="#"+_id+"-options-"+i;action.targetId="#"+_target+action.itemId;action.containerid=containerid;prx.buildAction(action,taptoclick);$("#"+_id+"-options-"+i+" .action-highlight").append('<span class="actionicon action-'+action.type+'" title="'+action.type+": "+action.title+'"></span>');});});break;case"tabbar":case"tabbar_retina":case"basic_tabbar":case"android_fixedtabbar":if(typeof(item.tabs)=="undefined"){item.tabs=[];}$.each(item.tabs,function(i,tab){if(typeof(tab.actions)=="undefined"){tab.actions=[];}if(tab.actions.length!=0){$("#"+_id+"-tabs-"+i).append("<div class='action-highlight'></div>");}$.each(tab.actions,function(j,action){action.bindTo="#"+_id+"-tabs-"+i;action.targetId="#"+_target+action.itemId;action.containerid=containerid;prx.buildAction(action,taptoclick);$("#"+_id+"-tabs-"+i+" .action-highlight").append('<span class="actionicon action-'+action.type+'" title="'+action.type+": "+action.title+'"></span>');});});break;case"flipswitch":case"flipswitch_retina":case"flipswitch_ios5":case"flipswitch_ios5_retina":case"android_onoffswitch":case"metro_onoff":if(typeof(item.flipswitchActionsOnActive)=="undefined"){if(typeof(item.actionsOnActive)=="undefined"){item.flipswitchActionsOnActive=[];}else{item.flipswitchActionsOnActive=item.actionsOnActive;}}if(typeof(item.flipswitchActionsOnDeactive)=="undefined"){if(typeof(item.actionsOnDeactive)=="undefined"){item.flipswitchActionsOnDeactive=[];}else{item.flipswitchActionsOnDeactive=item.actionsOnDeactive;}}if(typeof(item.flipswitchActionsOnDeactive)!="undefined"){item.flipswitchActionsOnDeactive.sort(function(a,b){return(a.sort-b.sort);});}if(typeof(item.flipswitchActionsOnActive)!="undefined"){item.flipswitchActionsOnActive.sort(function(a,b){return(a.sort-b.sort);});}if(item.flipswitchActionsOnActive.length!=0||item.flipswitchActionsOnDeactive.length!=0){$("#"+_id).append("<div class='action-highlight'></div>");}$.each(item.flipswitchActionsOnActive,function(j,action){if(action.type=="click"||action.type=="tap"){action.type="change";}action.bindTo="input:checked[id="+_id+"-flipswitch]";action.targetId="#"+_target+action.itemId;action.containerid=containerid;action.live=true;prx.buildAction(action,taptoclick);$("#"+_id+" .action-highlight").append('<span class="actionicon action-'+action.type+'" title="'+action.type+": "+action.title+'"></span>');});$.each(item.flipswitchActionsOnDeactive,function(j,action){if(action.type=="click"||action.type=="tap"){action.type="change";}action.bindTo="input[id="+_id+"-flipswitch]:not(:checked)";action.targetId="#"+_target+action.itemId;action.containerid=containerid;action.live=true;prx.buildAction(action,taptoclick);$("#"+_id+" .action-highlight").append('<span class="actionicon action-'+action.type+'" title="'+action.type+": "+action.title+'"></span>');});break;case"checkbox":case"checkbox_retina":case"radiobutton":case"radiobutton_retina":case"android_checkbox":case"android_radiobutton":case"metro_checkbox":case"metro_radiobutton":if(typeof(item.checkboxActionsOnActive)=="undefined"){item.checkboxActionsOnActive=[];}if(typeof(item.checkboxActionsOnDeactive)=="undefined"){item.checkboxActionsOnDeactive=[];}if(item.checkboxActionsOnActive.length!=0||item.checkboxActionsOnDeactive.length!=0){$("#"+_id).append("<div class='action-highlight'></div>");}$.each(item.checkboxActionsOnActive,function(j,action){if(action.type=="click"||action.type=="tap"){action.type="change";}action.bindTo="input:checked[id="+_id+"-checkbox]";action.targetId="#"+_target+action.itemId;action.containerid=containerid;action.live=true;prx.buildAction(action,taptoclick);$("#"+_id+" .action-highlight").append('<span class="actionicon action-'+action.type+'" title="'+action.type+": "+action.title+'"></span>');});$.each(item.checkboxActionsOnDeactive,function(j,action){if(action.type=="click"||action.type=="tap"){action.type="change";}action.bindTo="input[id="+_id+"-checkbox]:not(:checked)";action.targetId="#"+_target+action.itemId;action.containerid=containerid;action.live=true;prx.buildAction(action,taptoclick);$("#"+_id+" .action-highlight").append('<span class="actionicon action-'+action.type+'" title="'+action.type+": "+action.title+'"></span>');});break;case"android_actionbar":case"android_actionbar_contextual":if(typeof(item.actionbarActionOverflowActions)=="undefined"){if(typeof(item.actions)=="undefined"){item.actionbarActionOverflowActions=[];}else{item.actionbarActionOverflowActions=item.actions;}}if(typeof(item.actionbarActionOverflowActions)!="undefined"){item.actionbarActionOverflowActions.sort(function(a,b){return(a.sort-b.sort);});}if(item.actionbarActionOverflowActions.length!=0){$("#"+_id+" .actionOverflow").append("<div class='action-highlight'></div>");}$.each(item.actionbarActionOverflowActions,function(j,action){action.bindTo="#"+_id+" .actionOverflow";action.targetId="#"+_target+action.itemId;action.containerid=containerid;prx.buildAction(action,taptoclick);$("#"+_id+" .action-highlight").append('<span class="actionicon action-'+action.type+'" title="'+action.type+": "+action.title+'"></span>');});if(typeof(item.actionbarUpCaretActions)=="undefined"){item.actionbarUpCaretActions=[];}if(typeof(item.actionbarUpCaretActions)!="undefined"){item.actionbarUpCaretActions.sort(function(a,b){return(a.sort-b.sort);});}if(item.actionbarUpCaretActions.length!=0){$("#"+_id+" .left-icon").append("<div class='action-highlight'></div>");}$.each(item.actionbarUpCaretActions,function(j,action){action.bindTo="#"+_id+" .left-icon";action.targetId="#"+_target+action.itemId;action.containerid=containerid;prx.buildAction(action,taptoclick);$("#"+_id+" .action-highlight").append('<span class="actionicon action-'+action.type+'" title="'+action.type+": "+action.title+'"></span>');});break;case"symbol":if(typeof(item.actions)=="undefined"){item.actions=[];}if(item.actions.length!=0){$("#"+_id).append("<div class='action-highlight'></div>");}$.each(item.actions,function(j,action){action.bindTo="#"+_id;action.targetId="#"+_target+action.itemId;action.containerid=containerid;prx.buildAction(action,taptoclick);$("#"+_id+" > .action-highlight").append('<span class="actionicon action-'+action.type+'" title="'+action.type+": "+action.title+'"></span>');});break;default:if(typeof(item.actions)=="undefined"){item.actions=[];}if(item.actions.length!=0){$("#"+_id).append("<div class='action-highlight'></div>");}$.each(item.actions,function(j,action){action.bindTo="#"+_id;action.targetId="#"+_target+action.itemId;action.containerid=containerid;prx.buildAction(action,taptoclick);$("#"+_id+" .action-highlight").append('<span class="actionicon action-'+action.type+'" title="'+action.type+": "+action.title+'"></span>');});break;}};prx.parsePageAction=function(index){var _page=prx.pages[index];if(typeof(_page.actions)!="undefined"){$.each(_page.actions,function(i,action){action.bindTo="#p-"+_page.id;action.targetId=action.bindTo+"-"+action.itemId;action.pageEvent=true;if(action.type=="keydown"){action.bindTo=document;action.bindPageId="p-"+_page.id;}prx.buildAction(action);});}};prx.changeOrientation=function(){var _deviceOrientation=prx.getOrientation();try{var _activePage=$.mobile.activePage.get(0).id;if(typeof($._data($("#"+_activePage).get(0),"events"))=="undefined"||(typeof($._data($("#"+_activePage).get(0),"events"))!="undefined"&&typeof($._data($("#"+_activePage).get(0),"events").changeorientation)=="undefined")){var _id=prx.getPageIndexFromElementId(_activePage);var _page=prx.pages[prx.getPageIndexFromId(_id)];$("#"+_activePage).html("");prx.rePreloadPage(_page);$.mobile.changePage($("#"+_activePage),{transition:"none",allowSamePageTransition:true,changeHash:prx.pagehash});}else{jQuery.each($._data($("#"+_activePage).get(0),"events"),function(i,event){jQuery.each(event,function(i,handler){if(handler.type=="changeorientation"){$("#"+_activePage).trigger("changeorientation");}});});}}catch(e){}return true;};prx.rePreloadPage=function(_page){_page.orientation=prx.getOrientation();prx.preLoadPage(_page);};prx.actionLoadPage=function(action){if(action.animation==""){action.animation="none";}var _loadTransitions=[];_loadTransitions.slide="slidenofadeload";_loadTransitions.slideback="slidebacknofadeload";_loadTransitions.slidedown="slidedownnofadeload";_loadTransitions.slideup="slideupnofadeload";_loadTransitions.pop="popnofadeload";_loadTransitions.fade="fadenofadeload";_loadTransitions.flip="flipnofadeload";_loadTransitions.turn="turnnofadeload";_loadTransitions.flow="flownofadeload";if(typeof _loadTransitions[action.animation]!="undefined"){action.animation=_loadTransitions[action.animation];}var _activePage=$.mobile.activePage.get(0).id;$("#p-"+action.pageId).attr("loadedFrom",$.mobile.activePage.get(0).id);var _loadedFrom=$("#"+$.mobile.activePage.get(0).id);$(_loadedFrom).addClass("loadedFrom");$("#p-"+action.pageId).addClass("loadedTo");var _reverse=false;var _transition=action.animation;if(action.animation=="slideback"){_reverse=true;_transition="slide";}$("#p-"+action.pageId).one("pageshow",function(){prx.callbackAction(action);});setTimeout(function(){$.mobile.changePage($("#p-"+action.pageId),{transition:_transition,changeHash:prx.pagehash,reverse:_reverse});},action.delay);};prx.actionUnloadPage=function(action){var _unloadTransitions=[];_unloadTransitions.slide="slidenofadeunload";_unloadTransitions.slideback="slidebacknofadeunload";_unloadTransitions.slidedown="slidedownnofadeunload";_unloadTransitions.slideup="slideupnofadeunload";_unloadTransitions.pop="popnofadeunload";_unloadTransitions.fade="fadenofadeunload";_unloadTransitions.flip="flipnofadeunload";_unloadTransitions.turn="turnnofadeunload";_unloadTransitions.flow="flownofadeunload";if(typeof _unloadTransitions[action.animation]!="undefined"){action.animation=_unloadTransitions[action.animation];}if(action.animation==""){action.animation="none";}var _loadedPage=$.mobile.activePage.get(0).id;var _showPage=$("#"+_loadedPage).attr("loadedFrom");if(typeof(_showPage)!="undefined"){var _reverse=false;var _transition=action.animation;if(action.animation=="slideback"){_reverse=true;_transition="slide";}var _events=$._data($("#"+_showPage).get(0),"events").pageshow;delete $._data($("#"+_showPage).get(0),"events").pageshow;$("#"+_showPage).one("pageshow",function(){$._data($(this).get(0),"events").pageshow=_events;if(!prx.embed&&parent!=window){try{parent.prx.highlightPage(_showPage.substr(2));}catch(err){}}$("#"+_loadedPage).removeClass("loadedTo");$("#"+_showPage).removeClass("loadedFrom");_showPage=null;prx.callbackAction(action);});setTimeout(function(){$.mobile.changePage($("#"+_showPage),{allowSamePageTransition:true,transition:_transition,changeHash:prx.pagehash,reverse:_reverse});},action.delay);}};prx.actionHideItem=function(action){var targetId=action.targetId;if(typeof(action.pageId)!="undefined"&&action.pageId!=-1){targetId="#p-"+action.pageId+"-"+action.itemId;}setTimeout(function(){$(targetId).hide();$(targetId).addClass("hidden");prx.callbackAction(action);},action.delay);};prx.actionShowItem=function(action){var targetId=action.targetId;if(typeof(action.pageId)!="undefined"&&action.pageId!=-1){targetId="#p-"+action.pageId+"-"+action.itemId;}setTimeout(function(){$(targetId).show();$(targetId).removeClass("hidden");if(typeof(prx.scroller[targetId.substring(1)+"-inner"])!="undefined"){prx.scroller[targetId.substring(1)+"-inner"].refresh();}if($(targetId).hasClass("type-symbol")){$(targetId+" .box").each(function(){if(typeof(prx.scroller[this.id+"-inner"])!="undefined"){prx.scroller[this.id+"-inner"].refresh();}});}prx.callbackAction(action);},action.delay);};prx.actionToggleItem=function(action){var targetId=action.targetId;setTimeout(function(){$(targetId).toggle().toggleClass("hidden");if(!$(targetId).hasClass("hidden")){if(typeof(prx.scroller[targetId.substring(1)+"-inner"])!="undefined"){prx.scroller[targetId.substring(1)+"-inner"].refresh();}if($(targetId).hasClass("type-symbol")){$(targetId+" .box").each(function(){if(typeof(prx.scroller[this.id+"-inner"])!="undefined"){prx.scroller[this.id+"-inner"].refresh();}});}}prx.callbackAction(action);},action.delay);};prx.actionGoToPage=function(action){var _pageid="#p-"+action.pageId;var _currentpage=_pageid;action.pageId=action.pageId;try{_currentpage="#"+$.mobile.activePage.get(0).id;}catch(err){_currentpage="#"+$(".ui-page-active").first().attr("id");}var _pgId=_currentpage.substr(1);$.each(prx.scroller,function(i,elm){if(i.substr(0,_pgId.length)==_pgId){prx.scrollPosition[i]=[elm.x,elm.y];}});if(typeof(action.delay)=="undefined"){action.delay=0;}if(action.animation==""){action.animation="none";}var _Transitions=[];_Transitions.slidedown="slidedownnofade";_Transitions.slideup="slideupnofade";_Transitions.pop="popnofade";_Transitions.none="customnone";if(typeof _Transitions[action.animation]!="undefined"){action.animation=_Transitions[action.animation];}if(_pageid!=_currentpage){if((_pageid!=prx.eventTransitionPage)||(prx.eventTransitionPage=="#p-_back")){if(action.pageId=="_back"){_pageid=_gobackstack[_gobackstack.length-1];_gobackstack.pop();}var _targetPage=prx.getPageStructFromId(_pageid);if(_targetPage.orientation!=prx.getOrientation()){}$(".loadedFrom").removeClass("loadedFrom").addClass("remove-on-pageshow").addClass("ui-page-active");if(action.pageId!="_back"){_gobackstack.push(_currentpage);if(_gobackstack.length>=50){_gobackstack.shift();}}var _reverse=false;var _transition=action.animation;if(action.animation=="slideback"){_reverse=true;_transition="slide";}setTimeout(function(){$.mobile.changePage($(_pageid),{transition:_transition,changeHash:prx.pagehash,reverse:_reverse});prx.eventTransitionPage="#p-"+action.pageId;},action.delay);$(_pageid).one("pageshow",function(){var _pgId=_pageid.substr(1);if(typeof(prx.scroller)!="undefined"){$.each(prx.scroller,function(i,elm){if(i.substr(0,_pgId.length)==_pgId){if(typeof(prx.scrollPosition[i])!="undefined"){elm.scrollTo(prx.scrollPosition[i][0],prx.scrollPosition[i][1],0);}}});}prx.callbackAction(action);});$.mobile.silentScroll(0,0);}}else{prx.callbackAction(action);}};prx.actionGoToCarouselPage=function(action){if(typeof(action.pageId)!="undefined"&&action.pageId!=-1){targetId="#p-"+action.pageId+"-"+action.itemId;}var _pageX=action.itemIndex[0];var _pageY=action.itemIndex[1];if(_pageX==""){_pageX="nochange";}if(_pageY==""){_pageY="nochange";}if(typeof(action.animationDuration)=="undefined"){action.animationDuration=400;}if(typeof(prx.scroller[action.targetId.substr(1)+"-inner"])=="undefined"){return false;}switch(_pageX){case"previous":_pageX=(prx.scroller[action.targetId.substr(1)+"-inner"].currPageX>0&&prx.scroller[action.targetId.substr(1)+"-inner"].hScroll)?parseInt(prx.scroller[action.targetId.substr(1)+"-inner"].currPageX)-1:0;break;case"next":_pageX=(prx.scroller[action.targetId.substr(1)+"-inner"].hScroll)?parseInt(prx.scroller[action.targetId.substr(1)+"-inner"].currPageX)+1:0;break;case"nochange":_pageX=parseInt(prx.scroller[action.targetId.substr(1)+"-inner"].currPageX);break;default:_pageX=parseInt(_pageX);break;}switch(_pageY){case"previous":_pageY=(prx.scroller[action.targetId.substr(1)+"-inner"].currPageY>0&&prx.scroller[action.targetId.substr(1)+"-inner"].vScroll)?parseInt(prx.scroller[action.targetId.substr(1)+"-inner"].currPageY)-1:0;break;case"next":_pageY=(prx.scroller[action.targetId.substr(1)+"-inner"].vScroll)?parseInt(prx.scroller[action.targetId.substr(1)+"-inner"].currPageY)+1:0;break;case"nochange":_pageY=parseInt(prx.scroller[action.targetId.substr(1)+"-inner"].currPageY);break;default:_pageY=parseInt(_pageY);break;}var _scrollableTabbarContainer=false;for(var i=0;i<prx.scrollableTabbars.length;i++){if(action.targetId=="#"+prx.scrollableTabbars[i].container+"-"+prx.scrollableTabbars[i].linked){_scrollableTabbarContainer=prx.scrollableTabbars[i].container+"-"+prx.scrollableTabbars[i].id;break;}}setTimeout(function(){prx.scroller[action.targetId.substr(1)+"-inner"].scrollToPage(_pageX,_pageY,parseInt(action.scrollDuration));if(_scrollableTabbarContainer!=false){prx.scroller[_scrollableTabbarContainer+"-inner"].scrollToPage(_pageX,0,parseInt(action.scrollDuration));}},action.delay);setTimeout(function(){prx.callbackAction(action);},parseInt(action.delay)+parseInt(action.scrollDuration));};prx.actionScrollScrollableContainer=function(action){if(typeof(prx.scroller[action.targetId.substr(1)+"-inner"])=="undefined"){return false;}if(typeof(action.horizontalPx)=="undefined"){action.horizontalPx=0;}if(typeof(action.verticalPx)=="undefined"){action.verticalPx=0;}switch(action.scrollType){case"scroll-to":var _horizontalPx=-parseInt(action.horizontalPx);var _verticalPx=-parseInt(action.verticalPx);if(action.horizontalPx=="*"){_horizontalPx=prx.scroller[action.targetId.substr(1)+"-inner"].x;}if(action.verticalPx=="*"){_verticalPx=prx.scroller[action.targetId.substr(1)+"-inner"].y;}var relativeScroll=false;break;case"scroll-by":var _horizontalPx=parseInt(action.horizontalPx);var _verticalPx=parseInt(action.verticalPx);if(action.horizontalPx=="*"){_horizontalPx=0;}if(action.verticalPx=="*"){_verticalPx=0;}var relativeScroll=true;break;}setTimeout(function(){prx.scroller[action.targetId.substr(1)+"-inner"].scrollTo(_horizontalPx,_verticalPx,parseInt(action.scrollDuration),relativeScroll);},action.delay);setTimeout(function(){prx.callbackAction(action);},parseInt(action.delay)+parseInt(action.scrollDuration));};prx.actionFireItemEvent=function(action){setTimeout(function(){if(typeof(action.itemIndex)=="undefined"){$(action.targetId).trigger(action.itemEvent);}else{if(parseInt(action.itemIndex)==action.itemIndex){$(action.targetId+"-"+action.itemDynProps+"-"+action.itemIndex).trigger(action.itemEvent);}else{switch(action.itemIndex){case"actionbarUpCaretActions":$(action.targetId+" .left-icon").trigger(action.itemEvent);break;case"actionbarActionOverflowActions":$(action.targetId+" .actionOverflow").trigger(action.itemEvent);break;case"flipswitchActionsOnActive":$(action.targetId+" input:checked[id="+_id+"-flipswitch]").trigger(action.itemEvent);break;case"flipswitchActionsOnDeactive":$(action.targetId+" input[id="+_id+"-flipswitch]:not(:checked)").trigger(action.itemEvent);break;case"checkboxActionsOnActive":$(action.targetId+" input:checked[id="+_id+"-checkbox]").trigger(action.itemEvent);break;case"checkboxActionsOnDeactive":$(action.targetId+" input[id="+_id+"-checkbox]:not(:checked)").trigger(action.itemEvent);break;default:break;}}}prx.callbackAction(action);},action.delay);};prx.actionAnimateItem=function(action){var animEngine=prx.defaultAnimEngine;if(action.animationEasing.substring(0,12)=="cubic-bezier"){animEngine="Transit";}switch(animEngine){case"Transit":var props={easing:action.animationEasing,duration:action.duration,queue:false};break;default:var props={};var options={duration:parseInt(action.duration),easing:action.animationEasing,queue:false,complete:function(){prx.callbackAction(action);}};action.animationEasing=prx.easingTransitToTweenMax[action.animationEasing];break;}switch(action.animationType){case"move-item":switch(action.moveType){case"move-by":props.top=true;props.left=true;if(action.moveXBy!="*"){var x=Number(action.moveXBy);if(x>=0){x="+="+x;}else{x="-="+-x;}props.left=x;}if(action.moveYBy!="*"){var y=Number(action.moveYBy);if(y>=0){y="+="+y;}else{y="-="+-y;}props.top=y;}switch(animEngine){case"Transit":setTimeout(function(){$(action.targetId).transition(props,function(){prx.callbackAction(action);});},action.delay);break;default:TweenMax.to(action.targetId,options.duration/1000,{x:props.left,y:props.top,ease:options.easing,delay:action.delay/1000,onComplete:options.complete});break;}break;case"move-to":props.top=true;props.left=true;if(action.moveXTo!="*"){var x=Number(action.moveXTo);props.left=x;}if(action.moveYTo!="*"){var y=Number(action.moveYTo);props.top=y;}switch(animEngine){case"Transit":setTimeout(function(){$(action.targetId).transition(props,function(){prx.callbackAction(action);});},action.delay);break;default:TweenMax.to(action.targetId,options.duration/1000,{left:props.left,top:props.top,ease:options.easing,delay:action.delay/1000,onComplete:options.complete});break;}break;case"move-to-animation-target":var x=true;var y=true;var $ap=$("#p-"+action.pageId+"-"+action.animationPointId);x=$ap.position().left;y=$ap.position().top;switch(animEngine){case"Transit":setTimeout(function(){$(action.targetId).transition({left:x,top:y,easing:action.animationEasing,duration:action.duration,queue:false},function(){prx.callbackAction(action);});},action.delay);break;default:TweenMax.to(action.targetId,options.duration/1000,{left:x,top:y,ease:options.easing,delay:action.delay/1000,onComplete:options.complete});break;}break;default:break;}break;case"resize-item":props.scale=1;switch(action.resizeType){case"resize-by":if(action.resizeXBy!="*"){var x=Number(action.resizeXBy);if(x>=0){x="+="+x;}else{x="-="+-x;}props.width=x;}if(action.resizeYBy!="*"){var y=Number(action.resizeYBy);if(y>=0){y="+="+y;}else{y="-="+-y;}props.height=y;}switch(animEngine){case"Transit":setTimeout(function(){$(action.targetId).transition(props,function(){if(typeof(prx.scroller[action.targetId.substring(1)+"-inner"])!="undefined"){prx.scroller[action.targetId.substring(1)+"-inner"].refresh();}prx.callbackAction(action);});},action.delay);break;default:options.complete=function(){if(typeof(prx.scroller[action.targetId.substring(1)+"-inner"])!="undefined"){prx.scroller[action.targetId.substring(1)+"-inner"].refresh();}prx.callbackAction(action);};TweenMax.to(action.targetId,options.duration/1000,{width:props.width,height:props.height,ease:options.easing,delay:action.delay/1000,onComplete:options.complete});break;}break;case"resize-to":props.width=true;props.height=true;if(action.resizeXTo!="*"){var x=Number(action.resizeXTo);props.width=x;}if(action.resizeYTo!="*"){var y=Number(action.resizeYTo);props.height=y;}switch(animEngine){case"Transit":setTimeout(function(){$(action.targetId).transition(props,function(){if(typeof(prx.scroller[action.targetId.substring(1)+"-inner"])!="undefined"){prx.scroller[action.targetId.substring(1)+"-inner"].refresh();}prx.callbackAction(action);});},action.delay);break;default:options.complete=function(){if(typeof(prx.scroller[action.targetId.substring(1)+"-inner"])!="undefined"){prx.scroller[action.targetId.substring(1)+"-inner"].refresh();}prx.callbackAction(action);};TweenMax.to(action.targetId,options.duration/1000,{width:props.width,height:props.height,ease:options.easing,delay:action.delay/1000,onComplete:options.complete});break;}break;default:break;}break;case"scale-item":var x=Number(action.scaleX);var y=Number(action.scaleY);switch(animEngine){case"Transit":setTimeout(function(){$(action.targetId).transition({scale:[x,y],easing:action.animationEasing,duration:action.duration,queue:false},function(){prx.callbackAction(action);});},action.delay);break;default:TweenMax.to(action.targetId,options.duration/1000,{scaleX:x,scaleY:y,ease:options.easing,delay:action.delay/1000,onComplete:options.complete});break;}break;case"fade-item":switch(animEngine){case"Transit":setTimeout(function(){$(action.targetId).transition({opacity:Number(action.fadeTo),easing:action.animationEasing,duration:action.duration,queue:false},function(){prx.callbackAction(action);});},action.delay);break;default:TweenMax.to(action.targetId,options.duration/1000,{autoAlpha:Number(action.fadeTo),ease:options.easing,delay:action.delay/1000,onComplete:options.complete});break;}break;case"rotate-item":switch(action.rotateType){case"rotate-by":var deg=Number(action.rotateBy);if(deg>=0){deg="+="+deg;}else{deg="-="+-deg;}switch(animEngine){case"Transit":setTimeout(function(){$(action.targetId).transition({rotate:deg,easing:action.animationEasing,duration:action.duration,queue:false},function(){prx.callbackAction(action);});},action.delay);break;default:TweenMax.to(action.targetId,options.duration/1000,{rotation:deg,ease:options.easing,delay:action.delay/1000,onComplete:options.complete});break;}break;case"rotate-to":switch(animEngine){case"Transit":setTimeout(function(){$(action.targetId).transition({rotate:Number(action.rotateTo),easing:action.animationEasing,duration:action.duration,queue:false},function(){prx.callbackAction(action);});},action.delay);break;default:TweenMax.to(action.targetId,options.duration/1000,{rotation:Number(action.rotateTo),ease:options.easing,delay:action.delay/1000,onComplete:options.complete});break;}break;default:break;}break;default:break;}};prx.buildAction=function(action,taptoclick){if(typeof(taptoclick)=="undefined"){taptoclick=false;}if(typeof(action.targetId)=="undefined"){if(typeof(action.pageId)!="undefined"){action.targetId="#p-"+action.pageId+"-"+action.itemId;}else{action.targetId="#"+action.containerid+"-"+action.itemId;}}if(typeof(action.pageId)!="undefined"){if(action.pageId==-1){action.guid=action.containerid+"-"+action.guid;if(typeof(action.itemId)!="undefined"&&action.itemId.split("-").shift()==action.containerid.split("-").pop()){action.targetId="#"+action.containerid+"-"+action.itemId.split("-").slice(1).join("-");}else{action.targetId="#"+action.containerid+"-"+action.itemId;}}else{action.targetId="#p-"+action.pageId+"-"+action.itemId;}}if(action.animation==""){action.animation="none";}if(taptoclick){if(action.type=="tap"){}}if(action.type=="containerpageenter"&&typeof(action.namespace)=="undefined"){action.namespace=".page"+action.eventItemIndex[0]+"-"+action.eventItemIndex[1];}if(typeof(action.live)=="undefined"){action.live=false;}if(typeof(action.delay)=="undefined"){action.delay=0;}if(typeof(action.namespace)=="undefined"){action.namespace="";}if(typeof(action.guid)=="undefined"){action.guid=getGuid();}if(typeof(action.callback)=="undefined"){action.callback=false;}if(action.live){$(action.bindTo).live(action.type+action.namespace,function(event,a){if(prx.actionIsRunning[action.guid]==false){try{_activePage=$.mobile.activePage.get(0).id;}catch(err){_activePage=+$(".ui-page-active").first().attr("id");}if(action.type=="click"||action.type=="tap"){var target=event.target;while(target!=null&&target.nodeType==1){if(typeof(prx.scroller[target.id])!="undefined"){if(prx.scroller[target.id].moved){return false;}else{break;}}target=target.parentNode;}}if(action.type!="keydown"||action.type=="keydown"&&event.which==action.charCode&&_activePage==action.bindPageId&&!(/textarea|select|input/i.test(event.target.nodeName))){prx.actions[action.guid].call(this,event,a);if(action.type=="keydown"){return false;}}}});}else{$(action.bindTo).bind(action.type+action.namespace,function(event,a){if(prx.actionIsRunning[action.guid]==false){try{_activePage=$.mobile.activePage.get(0).id;}catch(err){_activePage=$(".ui-page-active").first().attr("id");}if(action.type=="click"||action.type=="tap"){var target=event.target;while(target!=null&&target.nodeType==1){if(typeof(prx.scroller[target.id])!="undefined"){if(prx.scroller[target.id].moved){return false;}else{break;}}target=target.parentNode;}}if(action.type!="keydown"||action.type=="keydown"&&event.which==action.charCode&&_activePage==action.bindPageId&&!(/textarea|select|input/i.test(event.target.nodeName))){prx.actions[action.guid].call(this,event,a);if(action.type=="keydown"){return false;}}}});}prx.actionIsRunning[action.guid]=false;prx.generateActionFunction(action);if(action.callback){if(action.loop){action.callbackAction.loop=action.loop;if(typeof(action.loopGUID)!="undefined"){action.callbackAction.loopGUID=action.loopGUID;}else{action.callbackAction.loopGUID=action.guid;}}if(typeof(action.previousActions)=="undefined"){action.previousActions=[];}if(typeof(action.containerid)!="undefined"){action.callbackAction.containerid=action.containerid;}action.callbackAction.previousActions=action.previousActions;action.callbackAction.previousActions.push(action.guid);prx.buildAction(action.callbackAction);}return true;};prx.generateActionFunction=function(action){prx.actions[action.guid]=function(event,a){if(!prx.actionIsRunning[action.guid]&&action.loop&&typeof(action.loopIterations)!="undefined"){prx.actionLoopCounter[action.guid]=action.loopIterations-1;}prx.actionIsRunning[action.guid]=true;if(typeof(event)!="undefined"){event.stopPropagation();if(action.type=="tap"){event.preventDefault();$(this).find("input[type=radio], input[type=checkbox]").not(":visible").attr("checked","checked");}}switch(action.actionId){case"alert":alert(action.bindTo);prx.callbackAction(action);break;case"stoppropagation":prx.callbackAction(action);break;case"go-to-page":prx.actionGoToPage(action);break;case"load-page":prx.actionLoadPage(action);break;case"unload-page":prx.actionUnloadPage(action);break;case"hide-item":prx.actionHideItem(action);break;case"show-item":prx.actionShowItem(action);break;case"show-hide-item":if(typeof(action.duration)=="undefined"){action.duration=200;}prx.actionShowItem(action);setTimeout(function(){prx.actionHideItem(action);},action.duration);break;case"toggle-item":prx.actionToggleItem(action);break;case"highlight-navbar-item":setTimeout(function(){if(action.itemIndex=="-1"){$(action.targetId+" input[type=radio]").removeAttr("checked");}else{var _itemid=action.targetId+"-radio-"+action.itemIndex;$("[id="+_itemid.substr(1)+"]").attr("checked",true);}prx.callbackAction(action);},action.delay);break;case"highlight-list-item":setTimeout(function(){if(action.itemIndex=="-1"){$(action.targetId+" input[type=radio]").removeAttr("checked");}else{var _itemid=action.targetId+"-checkbox-"+action.itemIndex;$(_itemid).attr("checked",true);}prx.callbackAction(action);},action.delay);break;case"highlight-pagecontroller-item":setTimeout(function(){if(action.itemIndex=="-1"){$(action.targetId+" input[type=radio]").removeAttr("checked");}else{$(action.targetId+" input").eq(parseInt(action.itemIndex)).attr("checked","checked");}prx.callbackAction(action);},action.delay);break;case"play-audio":setTimeout(function(){$(action.targetId+" audio").get(0).play();prx.callbackAction(action);},action.delay);break;case"pause-audio":setTimeout(function(){$(action.targetId+" audio").get(0).pause();prx.callbackAction(action);},action.delay);break;case"stop-audio":setTimeout(function(){$(action.targetId+" audio").get(0).pause();$(action.targetId+" audio").get(0).currentTime=0;prx.callbackAction(action);},action.delay);break;case"play-video":setTimeout(function(){$(action.targetId+" video").get(0).play();prx.callbackAction(action);},action.delay);break;case"pause-video":setTimeout(function(){$(action.targetId+" video").get(0).pause();prx.callbackAction(action);},action.delay);break;case"stop-video":setTimeout(function(){$(action.targetId+" video").get(0).pause();$(action.targetId+" video").get(0).currentTime=0;prx.callbackAction(action);},action.delay);break;case"go-to-carousel-page":prx.actionGoToCarouselPage(action);break;case"scroll-scrollable-container":prx.actionScrollScrollableContainer(action);break;case"sync-pagecontroller-item":var _page=0;if($(action.targetId).hasClass("type-pagecontroller-vertical")){_page=a.currPageY;}else{_page=a.currPageX;}setTimeout(function(){$(action.targetId+" input:eq("+_page+")").attr("checked","checked");prx.callbackAction(action);},action.delay);break;case"fire-item-event":prx.actionFireItemEvent(action);break;case"animate-item":prx.actionAnimateItem(action);break;case"end-loop":setTimeout(function(){var actionGuid=action.actionGuid;if(typeof(prx.actions[actionGuid])=="undefined"){actionGuid=action.containerid+"-"+action.actionGuid;}prx.actionLoopCounter[actionGuid]=0;prx.callbackAction(action);},action.delay);break;default:break;}};};prx.callbackAction=function(action){if(action.callback){prx.actions[action.callbackAction.guid].call();}else{if(typeof(action.loop)!="undefined"&&action.loop){var loopGuid=(typeof(action.loopGUID)!="undefined")?action.loopGUID:action.guid;if(prx.actionLoopCounter[loopGuid]>0){prx.actionLoopCounter[loopGuid]--;prx.actions[loopGuid].call();}else{prx.actionIsRunning[loopGuid]=false;}}else{prx.actionIsRunning[action.guid]=false;if(typeof(action.previousActions)!="undefined"){for(var i=0;i<action.previousActions.length;i++){prx.actionIsRunning[action.previousActions[i]]=false;}}}}};prx.preLoadPage=function(_page){var _data=$.evalJSON(_page.data);var _orientation=prx.devices[prx.device].defaultOrientation;var _OrientationWidth=0;var _OrientationHeight=0;var _actualPageHeight=0;if(typeof(_page.orientation)=="undefined"){_page.orientation=prx.devices[prx.device].defaultOrientation;}if(_page.orientation==""){_page.orientation=prx.devices[prx.device].defaultOrientation;}_orientation=_page.orientation;_OrientationWidth=prx.devices[prx.device][_orientation][0];_OrientationHeight=prx.devices[prx.device][_orientation][1];_actualPageHeight=_OrientationHeight;$("#dragarea").width(_OrientationWidth);var _currentPage=$("#p-"+_page.id);_currentPage.width(_OrientationWidth);_currentPage.css("height",_OrientationHeight+"px");_currentPage.unbind("pageshow").bind("pageshow",function(event,ui){_currentPage.height(_OrientationHeight);$(".remove-on-pageshow").removeClass("remove-on-pageshow").removeClass("ui-page-active");$.each($("#p-"+_page.id+" .type-picker, #p-"+_page.id+" .type-picker-retina, .type-android-scrollable-tabbar"),function(i,elm){if(typeof(prx.scroller[elm.id+"-inner"])!="undefined"){prx.scroller[elm.id+"-inner"].refresh();}});if(!prx.embed&&parent!=window){try{parent.prx.highlightPage(_page.id);}catch(err){}}$("#overlay").empty().hide();return false;});if(_page.navigationbar=="undefined"){_page.navigationbar="0";}prx.statusbars[_page.id]={};prx.statusbars[_page.id].statusbar=_page.statusbar;prx.statusbars[_page.id].orientation=_orientation;var _deviceOrientation=($(window).width()<$(window).height())?"portrait":"landscape";if(typeof(_page.navigationbar)=="undefined"){_page.navigationbar="0";}prx.navigationbars[_page.id]={};prx.navigationbars[_page.id].navigationbar=_page.navigationbar;prx.navigationbars[_page.id].orientation=_orientation;if(_page.orientation==_deviceOrientation){var _startscreen=(_deviceOrientation=="portrait")?prx.project.startscreen:prx.project.startscreenlandscape;if(prx.allowstatusbar&&_page.statusbar=="1"){try{if(_startscreen==_page.id){if(prx.export2html!="1"){$("#statusbar").css({"background-image":prx.buildStatusBarAsset(_orientation)});}else{if(prx.statusbarapplies=="1"){$("#statusbar").css("background-image","url(./images/statusbar_"+_orientation+".png)");}else{$("#statusbar").css("background-image","none");}}$("#statusbar").css("height",prx.devices[prx.device]["statusbarheight"+_orientation]+"px");}_currentPage.css("top",prx.devices[prx.device]["statusbarheight"+_orientation]+"px");_actualPageHeight=_actualPageHeight-prx.devices[prx.device]["statusbarheight"+_orientation];}catch(err){}}if(prx.allownavigationbar&&_page.navigationbar=="1"){try{if(_startscreen===_page.id){if(prx.export2html!="1"){$("#navigationbar").css({"background-image":prx.buildNavigationBarAsset(_orientation)});}else{if(prx.navigationbarapplies=="1"){$("#navigationbar").css("background-image","url(./images/navigationbar_"+_orientation+".png)");}else{$("#statusbar").css("background-image","none");}}}$("#navigationbar").css("height",prx.devices[prx.device]["navigationbarheight"+_orientation]+"px");$("#navigationbar").css("top",prx.devices[prx.device][_orientation][1]-prx.devices[prx.device]["navigationbarheight"+_orientation]+"px");_actualPageHeight=_actualPageHeight-prx.devices[prx.device]["navigationbarheight"+_orientation];}catch(err){}}}$("#dragarea").height(_actualPageHeight);if(typeof(_page.background)=="undefined"){_page.background.toLowerCase()="none";}if(_page.background!="none"){_currentPage.css("background-color",getColor(_page.background));}if(_data.templateid.length>0){var index=prx.getTemplateIndexFromId(_data.templateid);if(index>-1){var containerid="";var _cTemplate=prx.renderTemplate(_data.templateid,containerid,_page.id);_currentPage.append('<div id="p-'+_page.id+'-template" style="position: absolute; left: 0px; top: 0px; background: none; width: '+_OrientationWidth+"px; height: "+_actualPageHeight+'px; overflow: hidden;">'+_cTemplate+"</div>");_cTemplate=null;if(typeof(prx.templates[index].background)=="undefined"){prx.templates[index].background="none";}if(_page.background=="none"&&prx.templates[index].background!="none"){_currentPage.css("background-color",getColor(prx.templates[index].background));}var _dataFromTemplate=$.evalJSON(prx.templates[index].data);var _items=_dataFromTemplate.items;var _templateid=_dataFromTemplate.templateid;prx.loadRecursiveTemplateAfterDisplay(_data.templateid,containerid,_page.id);_dataFromTemplate=null;_items=null;}else{_data.templateid="";}}$.each(_data.items,function(i,item){prx.addItem(_page.id,item);});prx.loadPageEvents(_page.id);prx.loadRecursiveTemplateEvents(_data.templateid,_page.id);};prx.loadRecursiveTemplateEvents=function(templateid,pageid,containerid){if(typeof(containerid)=="undefined"){containerid="";}prx.loadTemplateEvents(templateid,pageid,containerid);var index=prx.getTemplateIndexFromId(templateid);if(index>-1){var _tempdata=$.evalJSON(prx.templates[index].data);var _templateid=_tempdata.templateid;if(_templateid!=undefined){if(eval(_templateid)>-1){if(containerid.length==0){containerid="t"+templateid;}else{containerid="-t"+templateid;}prx.loadRecursiveTemplateEvents(_templateid,pageid,containerid);}}_tempdata=null;}return true;};prx.loadRecursiveTemplateAfterDisplay=function(templateid,containerid,pageid){var index=prx.getTemplateIndexFromId(templateid);var _containerid="";if(typeof(containerid)=="undefined"){containerid="p-"+pageid+"-";}else{if(containerid.length==0){containerid="p-"+pageid+"-";}else{containerid=containerid+"-";}_containerid=containerid+"t"+templateid;}if(index>-1){var _tempdata=$.evalJSON(prx.templates[index].data);var _templateid=_tempdata.templateid;var _items=_tempdata.items;for(var n=0;n<_items.length;n++){var tempitem=_items[n];prx.updateItemVisibility(tempitem,_containerid);prx.updateItemPosition(tempitem,_containerid,pageid);if(typeof(prx.types[tempitem.type])!="undefined"){if(typeof(prx.types[tempitem.type].afterDisplay)!="undefined"){prx.types[tempitem.type].afterDisplay(tempitem,_containerid,pageid);}}}if(typeof(prx.templates[index].background)=="undefined"){prx.templates[index].background="none";}if(($("#p-"+pageid).css("background-color")=="transparent"||$("#p-"+pageid).css("background-color")=="rgba(0, 0, 0, 0)")&&prx.templates[index].background!="none"){$("#p-"+pageid).css("background-color",getColor(prx.templates[index].background));}if(_templateid!=undefined){if(eval(_templateid)>-1){prx.loadRecursiveTemplateAfterDisplay(_templateid,_containerid,pageid);}}_tempdata=null;_items=null;}return true;};prx.clearDragArea=function(){$("#dragarea").html("");};prx.renderTemplate=function(templateid,containerid,pageid){var index=prx.getTemplateIndexFromId(templateid);var _cR="";var _containerid="";if(typeof(containerid)=="undefined"){containerid="p-"+pageid+"-";}else{if(containerid.length==0){containerid="p-"+pageid+"-";}else{containerid=containerid+"-";}_containerid=containerid+"t"+templateid;}_cR='<div id="'+_containerid+'">';if(index>-1){var _tempdata=$.evalJSON(prx.templates[index].data);var _items=_tempdata.items;var _templateid=_tempdata.templateid;if(_templateid!=undefined){if(eval(_templateid)>-1){_cR=_cR+prx.renderTemplate(_templateid,_containerid,pageid);}}for(var n=0;n<_items.length;n++){var tempitem=_items[n];if(typeof(prx.types[tempitem.type])!="undefined"){if(typeof(prx.types[tempitem.type].onDisplayTemplate)!="undefined"){_cR=_cR+prx.types[tempitem.type].onDisplayTemplate(tempitem,_containerid);}else{_cR=_cR+prx.types[tempitem.type].onDisplay(tempitem,_containerid);}}}}_cR=_cR+"</div>";return _cR;};prx.addItem=function(pageid,item){var zIndex;if(!item){var itemid="box-"+(prx.data.items.length+1);var item=[{id:itemid,hpos:"left",vpos:"top",wtype:"fixed",htype:"fixed",left:0,top:0,width:100,height:100,zindex:zIndex,opacity:1,type:"default",text:""}];var tempitem=item[0];}else{if(!item.groups){item.groups=[];}if(!item.zindex){item.zindex=zIndex+1;}if(!item.hpos){item.hpos="left";}if(!item.vpos){item.vpos="top";}if(!item.wtype){item.wtype="fixed";}if(!item.htype){item.htype="fixed";}if(!item.opacity){item.opacity="1";}var tempitem=item;item=[item];}var _containerid="p-"+pageid;if(typeof(prx.types[tempitem.type])!="undefined"){if(typeof(prx.types[tempitem.type].onDisplay)!="undefined"){$("#p-"+pageid).append(prx.types[tempitem.type].onDisplay(tempitem,_containerid));}}prx.updateItemVisibility(tempitem,_containerid);prx.updateItemPosition(tempitem,_containerid,pageid);if(typeof(prx.types[tempitem.type])!="undefined"){if(typeof(prx.types[tempitem.type].afterDisplay)!="undefined"){prx.types[tempitem.type].afterDisplay(tempitem,_containerid,pageid);}}};prx.renderSymbol=function(item,containerid,pageid){var _cR="";var index=prx.getSymbolIndexFromId(item.symbolid);var _containerid="";if(typeof(containerid)=="undefined"){_containerid="p-"+pageid+"-";}else{if(containerid.length==0){containerid="p-"+pageid+"-";}else{containerid=containerid+"-";}_containerid=containerid+item.id;}var _symbol_width="100%";var _symbol_height="100%";if(item.scroll!=""){if(item.scroll=="horizontal"||item.scroll=="omni"){_symbol_width=prx.symbols[prx.getSymbolIndexFromId(item.symbolid)].dimensions[0]+"px";}if(item.scroll=="vertical"||item.scroll=="omni"){_symbol_height=prx.symbols[prx.getSymbolIndexFromId(item.symbolid)].dimensions[1]+"px";}}if(index>-1){var _items=$.evalJSON(prx.symbols[index].data);for(var n=0;n<_items.length;n++){var tempitem=_items[n];if(typeof(prx.types[tempitem.type].onDisplaySymbol)!="undefined"){_cR=_cR+prx.types[tempitem.type].onDisplaySymbol(tempitem,_containerid,pageid,item);}else{_cR=_cR+prx.types[tempitem.type].onDisplay(tempitem,_containerid,pageid,item);}}}return _cR;};prx.loadRecursiveSymbolAfterDisplay=function(item,containerid,pageid){var index=prx.getSymbolIndexFromId(item.symbolid);var _containerid="";if(typeof(item.scrollsnap)=="undefined"){item.scrollsnap=false;}if(typeof(containerid)=="undefined"){_containerid="p-"+pageid+"-";}else{if(containerid.length==0){containerid="p-"+pageid+"-";}else{containerid=containerid+"-";}_containerid=containerid+item.id;}if(index>-1){var _items=$.evalJSON(prx.symbols[index].data);for(var n=0;n<_items.length;n++){var tempitem=_items[n];prx.updateItemVisibility(tempitem,_containerid);prx.updateSymbolItemPosition(tempitem,_containerid,pageid,item);if(typeof(prx.types[tempitem.type].afterDisplay)!="undefined"){prx.types[tempitem.type].afterDisplay(tempitem,_containerid,pageid);}prx.parseItemAction(tempitem,_containerid,pageid,"",true);}}if(typeof(item.scroll)!="undefined"){if(item.scroll!=""){$("#p-"+pageid).bind("pageshow",function(event,ui){if(typeof(prx.scroller[_containerid+"-inner"])!="undefined"){delete prx.scroller[_containerid+"-inner"];}if(typeof(prx.scroller[_containerid+"-inner"])=="undefined"){try{if(typeof(item.lockdirection)=="undefined"){item.lockdirection=true;}prx.scroller[_containerid+"-inner"]=new iScroll(_containerid+"-inner",{onBeforeScrollStart:function(e){var target=e.target;while(target.nodeType!=1){target=target.parentNode;}if(target.tagName!="SELECT"&&target.tagName!="INPUT"&&target.tagName!="TEXTAREA"){e.preventDefault();}},snap:eval(item.scrollsnap),useTransition:true,zoom:eval(item.pinchzoom),momentum:eval(item.momentum),hScrollbar:eval(item.hscrollbar),vScrollbar:eval(item.vscrollbar),bounce:true,bounceLock:true,lockDirection:eval(item.lockdirection),onScrollEnd:function(){$("#"+_containerid).trigger("containerpagechange",this);$("#"+_containerid).trigger("containerpageenter.page"+this.currPageX+"-"+this.currPageY,this);}});var RESIZE_EV="onorientationchange" in window?"orientationchange":"resize";prx.scroller[_containerid+"-inner"]._unbind(RESIZE_EV,window);for(var i=0;i<prx.scrollableTabbars.length;i++){var _linked=prx.scrollableTabbars[i].container+"-"+prx.scrollableTabbars[i].linked+"-inner";if(_linked==_containerid+"-inner"){var _tabbar=prx.scrollableTabbars[i].container+"-"+prx.scrollableTabbars[i].id+"-inner";prx.scroller[_linked].options.linkedTabbar=_tabbar;prx.scroller[_linked].scrollToPage(Number(prx.scrollableTabbars[i].start),0,0);if(typeof(prx.scroller[_tabbar])!="undefined"){prx.scroller[_tabbar].scrollToPage(Number(prx.scrollableTabbars[i].start),0,0);}prx.scroller[_linked].options.onScrollMove=function(){prx.scroller[this.options.linkedTabbar].scrollTo(this.x/2,0,0,false);};prx.scroller[_linked].options.onTouchEnd=function(){prx.scroller[this.options.linkedTabbar].scrollToPage(this.currPageX,0,200);};}}}catch(err){}}});}}return true;};prx.updateItemVisibility=function(item,containerid){var _item="";if(typeof(containerid)!="undefined"){_item=$("#"+containerid+"-"+item.id);}else{_item=$("#"+item.id);}if(typeof(item.visible)!="undefined"){if(!item.visible){if(!_item.hasClass("hidden")){_item.addClass("hidden");}}else{if(_item.hasClass("hidden")){_item.removeClass("hidden");}}}if(typeof(item.opacity)!="undefined"){_item.css("opacity",item.opacity);}_item=null;};prx.updateItemPosition=function(item,containerid,pageid){var _item="";if(typeof(containerid)!="undefined"){_item=$("#"+containerid+"-"+item.id);}else{_item=$("#"+item.id);}var _page=prx.pages[prx.getPageIndexFromId(pageid)];var _orientation="";var _OrientationWidth=0;var _OrientationHeight=0;if(typeof(_page.orientation)=="undefined"){_page.orientation=prx.devices[prx.device].defaultOrientation;}_orientation=_page.orientation;_OrientationWidth=prx.devices[prx.device][_orientation][0];_OrientationHeight=prx.devices[prx.device][_orientation][1];if(typeof(_page.statusbar)=="undefined"){_page.statusbar=prx.statusbar;}if(typeof(_page.navigationbar)=="undefined"){_page.navigationbar=prx.navigationbar;}if(_page.statusbar=="1"){_OrientationHeight=_OrientationHeight-prx.devices[prx.device]["statusbarheight"+_orientation];}if(_page.navigationbar=="1"){_OrientationHeight=_OrientationHeight-prx.devices[prx.device]["navigationbarheight"+_orientation];}var _leftPos=item.left;var _topPos=item.top;var _x=item.left;var _y=item.top;var _wi=item.width;var _hi=item.height;var _width=item.width;var _height=item.height;if(item.width!="full"){switch(item.wtype){case"fixed":_width=_wi;break;case"variable":_width=_OrientationWidth-_wi;break;}_item.css("width",_width+"px");}if(item.height!="full"){switch(item.htype){case"fixed":_height=_hi;break;case"variable":_height=_OrientationHeight-_hi;break;}_item.css("height",_height+"px");}switch(item.hpos){case"left":_leftPos=_x;break;case"right":_leftPos=_OrientationWidth-_x-_width;break;case"center":_leftPos=(_OrientationWidth-_width)/2;break;}_item.css("left",_leftPos+"px");switch(item.vpos){case"top":_topPos=_y;break;case"bottom":_topPos=_OrientationHeight-_y-_height;break;case"middle":_topPos=(_OrientationHeight-_height)/2;break;}_item.css("top",_topPos+"px");_item=null;};prx.updateSymbolItemPosition=function(item,containerid,pageid,symbol){var _item="";if(typeof(containerid)!="undefined"){_item=$("#"+containerid+"-"+item.id);}else{_item=$("#"+item.id);}var _dims=prx.symbols[prx.getSymbolIndexFromId(symbol.symbolid)].dimensions;var _page=prx.pages[prx.getPageIndexFromId(pageid)];var _orientation="";var _OrientationWidth=_dims[0];var _OrientationHeight=_dims[1];var _leftPos=item.left;var _topPos=item.top;var _x=item.left;var _y=item.top;var _wi=item.width;var _hi=item.height;var _width=item.width;var _height=item.height;if(item.width!="full"){switch(item.wtype){case"fixed":_width=_wi;break;case"variable":_width=_OrientationWidth-_wi;break;}_item.css("width",_width+"px");}if(item.height!="full"){switch(item.htype){case"fixed":_height=_hi;break;case"variable":_height=_OrientationHeight-_hi;break;}_item.css("height",_height+"px");}switch(item.hpos){case"left":_leftPos=_x;break;case"right":_leftPos=_OrientationWidth-_x-_width;break;case"center":_leftPos=(_OrientationWidth-_width)/2;break;}_item.css("left",_leftPos+"px");switch(item.vpos){case"top":_topPos=_y;break;case"bottom":_topPos=_OrientationHeight-_y-_height;break;case"middle":_topPos=(_OrientationHeight-_height)/2;break;}_item.css("top",_topPos+"px");_item=null;};prx.updateTemplateItemPosition=function(item,pageid){var _id="#"+item.id;var _page=prx.pages[prx.getPageIndexFromId(pageid)];var _orientation="";var _OrientationWidth=0;var _OrientationHeight=0;if(typeof(_page.orientation)=="undefined"){_page.orientation=prx.devices[prx.device].defaultOrientation;}_orientation=_page.orientation;_OrientationWidth=prx.devices[prx.device][_orientation][0];_OrientationHeight=prx.devices[prx.device][_orientation][1];if(typeof(_page.statusbar)=="undefined"){_page.statusbar=prx.statusbar;}if(typeof(_page.navigationbar)=="undefined"){_page.navigationbar=prx.navigationbar;}if(_page.statusbar=="1"){_OrientationHeight=_OrientationHeight-prx.devices[prx.device]["statusbarheight"+_orientation];}if(_page.navigationbar=="1"){_OrientationHeight=_OrientationHeight-prx.devices[prx.device]["navigationbarheight"+_orientation];}var _leftPos=item.left;var _topPos=item.top;var _x=item.left;var _y=item.top;var _wi=item.width;var _hi=item.height;var _width=item.width;var _height=item.height;if(item.width!="full"){switch(item.wtype){case"fixed":_width=_wi;break;case"variable":_width=_OrientationWidth-_wi;break;}item.width=_width;}if(item.height!="full"){switch(item.htype){case"fixed":_height=_hi;break;case"variable":_height=_OrientationHeight-_hi;break;}item.height=_height;}switch(item.hpos){case"left":_leftPos=_x;break;case"right":_leftPos=_OrientationWidth-_x-_width;break;case"center":_leftPos=(_OrientationWidth-_width)/2;break;}item.left=_leftPos;switch(item.vpos){case"top":_topPos=_y;break;case"bottom":_topPos=_OrientationHeight-_y-_height;break;case"middle":_topPos=(_OrientationHeight-_height)/2;break;}item.top=_topPos;return item;};prx.setupShowActionsOnShift=function(){if(!prx.embed&&parent!=window){$(document).keydown(function(e){if(e.which==16&&prx.shiftKeyDown==false){prx.shiftKeyDown=true;parent.prx.showActions();$(parent.document).find("#show-actions").addClass("active").find(".tooltip").text("Show actions");}}).keyup(function(e){if(e.which==16&&prx.shiftKeyDown==true){prx.shiftKeyDown=false;parent.prx.hideActions();$(parent.document).find("#show-actions").removeClass("active").find(".tooltip").text("Show actions");}});}};prx.loadProjectFonts=function(){var _str="";for(var i=0;i<prx.fonts.length;i++){_str+=prx.fonts[i].value+":";for(var j=0;j<prx.fonts[i].variants.length;j++){_str+=prx.fonts[i].variants[j]+",";}_str=_str.slice(0,-1)+"|";}_str=_str.slice(0,-1);if(_str!=""){$("head").append('<link href="https://fonts.googleapis.com/css?family='+_str+'" type="text/css" rel="stylesheet"/>');}};Math.precision=function(value,precision){if(precision===undefined){precision=0;}return Math.round(value*Math.pow(10,precision))/Math.pow(10,precision);};prx.getColor=function(_ahex){var _r={};_r.hex="FFFFFF";_r.alpha=1;if(_ahex.length>5){_r.hex=_ahex.replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,6);}if(_ahex.length==8){_r.alpha=Math.precision((parseInt(_ahex.replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(6,8),16)*100)/255,1)/100;}return _r;};function NoClickDelay(el){this.element=el;if(window.Touch){this.element.addEventListener("touchstart",this,false);}}NoClickDelay.prototype={handleEvent:function(e){switch(e.type){case"touchstart":this.onTouchStart(e);break;case"touchmove":this.onTouchMove(e);break;case"touchend":this.onTouchEnd(e);break;}},onTouchStart:function(e){this.moved=false;this.element.addEventListener("touchmove",this,false);this.element.addEventListener("touchend",this,false);},onTouchMove:function(e){this.moved=true;},onTouchEnd:function(e){this.element.removeEventListener("touchmove",this,false);this.element.removeEventListener("touchend",this,false);if(!this.moved){var theTarget=document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY);if(theTarget.nodeType==3){theTarget=theTarget.parentNode;}var theEvent=document.createEvent("MouseEvents");theEvent.initEvent("click",true,true);theTarget.dispatchEvent(theEvent);}}};var getGuid=function(){var guid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:(r&3|8);return v.toString(16);});return guid;};prx.buildStatusBarAsset=function(orientation){if(prx.statusbarapplies=="1"){if(prx.devices[prx.device].statusbar_skin=="default"){return"url("+prx.url.account+"/assets/device/default/statusbar_"+orientation+".png)";}else{if(prx.devices[prx.device].statusbar_skin=="shared"){return"url("+prx.url.account+"/assets/device/shared/"+prx.devices[prx.device].device_uuid+"/statusbar_"+orientation+".png)";}else{return"url("+prx.url.account+"/assets/device/"+prx.devices[prx.device].device_uuid+"/statusbar_"+orientation+".png)";}}}else{return"none";}};prx.buildNavigationBarAsset=function(orientation){if(prx.navigationbarapplies=="1"){if(prx.devices[prx.device].navigationbar_skin=="default"){return"url("+prx.url.account+"/assets/device/default/navigationbar_"+orientation+".png)";}else{if(prx.devices[prx.device].navigationbar_skin=="shared"){return"url("+prx.url.account+"/assets/device/shared/"+prx.devices[prx.device].device_uuid+"/navigationbar_"+orientation+".png)";}else{return"url("+prx.url.account+"/assets/device/"+prx.devices[prx.device].device_uuid+"/navigationbar_"+orientation+".png)";}}}else{return"none";}};prx.goToPage=function(pageid){try{_currentpage="#"+$.mobile.activePage.get(0).id;}catch(err){_currentpage="#"+$(".ui-page-active").first().attr("id");}_gobackstack.push(_currentpage);if(_gobackstack.length>=50){_gobackstack.shift();}$.mobile.changePage($("#p-"+pageid),{transition:"none",allowSamePageTransition:true,changeHash:prx.pagehash});prx.eventTransitionPage="#p-"+pageid;};prx.triggerKeydownAction=function(e){$(document).trigger(e);};prx.triggerOrientationChange=function(){prx.changeOrientation();};prx.buildAnimationProperties=function(props,action){var _props=props;var _options={};_options.duration=parseInt(props.duration);_options.easing=props.easing;_options.queue=props.queue;_options.complete=function(){prx.callbackAction(action);};delete _props.duration;delete _props.easing;delete _props.queue;return{properties:_props,options:_options};};function getColor(color){if(typeof(color)=="undefined"){return"";}if(color=="none"){return"rgba(0,0,0,0)";}if(color==color.replace(/[^A-F0-9]/ig,"")){return"#"+color;}return color;}